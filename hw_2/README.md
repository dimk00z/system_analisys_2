# Домашка второго урока

## TODO

- выпишите все поддомены, которые вы нашли в системе;

- определите все типы поддоменов и заполните core domain chart;

- определите боундед-контексты для каждого из поддоменов, основываясь на требованиях (хватит одной модели, как было в уроке);

- сравните полученные боундед-контексты из поддоменов и боундед-контексты, полученные из ES. Опишите, что разошлось (можно показать на картинке в сравнении) и предположения, почему так получилось;

- сделайте исправленную версию ES-модели и модели данных, если боундед-контексты разошлись. Если не разошлись — приложите ES и модель данных из прошлого урока;
  - если нашли места, где бизнес-команда разбилась на технические шаги, — отметьте эти места на модели;

- выпишите характеристики, важные для проекта. В нашем случае мы не можем спросить у бизнеса, что важно, а что нет;
  - для каждой найденной характеристики укажите место, где она была взята;

- выберите один из четырёх архитектурных стилей, описанных в уроке. Опишите, почему вы сделали такой выбор и по каким характеристикам сравнивали стили (можно использовать картинку из урока со сравнением стилей);

- сделайте итоговую модель системы, укажите виды коммуникаций между элементами, если выбрали распределённый стиль.

## Solutions

### Поддомены

| Вид поддомена                                               | Конкурентное преимущество | Сложность | Изменчивость | Варианты реализации                   | Интерес проблемы | Предполагаемый вид поддомена |
| :---------------------------------------------------------- | :------------------------ | :-------- | :----------- | :------------------------------------ | :--------------- | :--------------------------- |
| Рекрутинг котов-обычных образцов                            | да                        | высокая   | частая       | свое/отдать catHrAgency на аутсорс    | высокий          | core                         |
| Менеджмент качества заказов                                 | нет                       | низкая    | редкая       | свое/возможно есть у MCF              | высокий          | generic                      |
| "Выполнение задачи по  по тыгыдыканию и скидыванию стаканов |                           |           |              |                                       |                  |                              |
| (исполнение заказов на услугу)"                             | да                        | высокая   | частая       | только свое                           | высокий          | core                         |
| Учет и выдача расходников (инвертанизация)                  | нет                       | низкая    | редкая       | написать/купить 1сКот                 | низкий           | supporting                   |
| Расчет стоимости услуг                                      | да                        | высокая   | частая       | свое по секретной формуле             | высокий          | core                         |
| Выплаты и списания                                          | нет                       | низкая    | редкая       | только свое                           | низкий           | generic                      |
| Тотализатор ставок                                          | нет                       | низкая    | редкая       | купить расчет у КотЛото/написать свое | низкий           | supporting                   |
| Подбор обычных образцов с инновационной системой            | да                        | высокая   | частая       | только свое                           | высокий          | core                         |

### Поддомены и боундед-контексты

| Вид поддомена                                                                                | Предполагаемый вид поддомена | Выделенный боундед-контекст                              |
| :------------------------------------------------------------------------------------------- | :--------------------------- | :------------------------------------------------------- |
| Рекрутинг котов-воркеров                                                                     | core                         | Найм и учет обычных образцов                             |
| Менеджмент качества заказов                                                                  | generic                      | Выполнение заказов эталонных образцов                    |
| "Выполнение задачи по  по тыгыдыканию и скидыванию стаканов  (исполнение заказов на услугу)" | core                         | Выполнение заказов эталонных образцов                    |
| Учет и выдача расходников (инвертанизация)                                                   | supporting                   | Подписка на 1сКот                                        |
| Расчет стоимости услуг                                                                       | core                         | Выполнение заказов эталонных образцов                    |
| Расчет зарплат и списаний у клиентов                                                         | generic                      | Списания у эталонных образцов и выплаты обычным образцам |
| Тотализатор ставок                                                                           | supporting                   | Покупка рассчета у КотЛота                               |
| Подбор воркеров                                                                              | core                         | Найм и учет обычных образцов                       |

### Сравнение с ES первой домашки

В прошлый раз не было мыслей отдать что-то на аутсорс, а была перед глазами задачи пилить, что видишь.
Сейчас видно, что так можно, но не учитывает реалии жизни, многие требования и ограничения.

Но в целом у меня сохранились:

- Рекрутинг котов-воркеров
- Тотализатор ставок(он будет меня преследовать)
- Менеджмент качества заказов
- Рекрутинг котов-воркеров
- Учет и выдача расходников (инвертанизация)

Из измененного вижу:

- Подбор воркеров
- Расчет зарплат и премий -> Списания у эталонных образцов и выплаты обычным образцам
- Добавление заказов + Выполнение заказа + Расчет стоимости услуг -> Выполнение заказов эталонных образцов

Я вижу, что для бизнеса это общие истории, но есть сомнения, что укрупнения могут пойти на пользу.

### Исправленная версия ES-модели

Там же на миро правее [ES на miro](https://miro.com/app/board/uXjVNNO37oA=/?share_link_id=792654826027)

Модель данных

### Важные для проекта характеристики

Общие пожелания по системе

```text
Бизнесу необходим низкий ТТМ (Time To Market), чтобы конкурировать на рынке.
Общая нагрузка на систему не будет превышать 10 заказов в день и 100 клиентов. Воркеров будет около 20 котов.
Для бизнеса критично проверять новые гипотезы по отсеву котов и изменять уже существующие с максимальной скоростью и надёжностью.
[US-081] Мы ожидаем 1к заявок в день от рандомных котов, также, судя по отзывам, наши конкуренты могут попытаться нас заддосить в этом месте. Они так делали уже несколько раз с другими компаниями, после чего компании закрывались с позором.
```

| Характеристика |                 | Требуется в системе | Требование                                                  |
| :------------- | :-------------- | :------------------ | :---------------------------------------------------------- |
| 1              | Availability    | +                   | Вероятность ddos                                            |
| 2              | Scalability     | ???                 | Количество заявок 1к                                        |
| 3              | Modifiability   | -                   | happy cat box готовы потратить столько, сколько потребуется |
| 4              | Maintainability | ???                 | возможно да                                                 |
| 5              | Securability    | +-'                 | скорее да                                                   |
| 6              | Performance     | ???                 |                                                             |
| 7              | Agility         | +                   | низкий ТТМ                                                  |
| 8              | Testability     | +                   | низкий ТТМ, ошибки прошлого                                 |
| 9              | Deployability   | +                   | низкий ТТМ, ошибки прошлого                                 |
| 10             | Usability       | ???                 | ничего не сказано, но не лишнее                             |
| 11             | Consistency     | -                   | информации нет                                              |
| 12             | Simplicity      | ???                 | скорее да                                                   |
| 13             | Elasticity      | +                   | Вероятность ddos                                            |

### Выбор архитектурного стиля

По требованиями низкого TTM и необходимости выдерживать разную нагрузку под DDOS подходит микросервисный или service-based подход. Из заданных 4 остановлюсь на микросервисном. Писать его дорого, но проще скалировать и выкатывать новые фичи.
Взаимодействие будет асинхронными через какую-то шину данных на основе генерации событий. С этим есть сложности в технической реализации, но мы наймем лучших кото-бэков, который будут мутить которкестрацию или котохореографию.

### Итоговая модель системы

pass
